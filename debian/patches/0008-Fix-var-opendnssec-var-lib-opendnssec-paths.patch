From: =?utf-8?b?T25kxZllaiBTdXLDvQ==?= <ondrej@sury.org>
Date: Mon, 2 Jan 2017 15:59:27 +0100
Subject: Fix /var/opendnssec -> /var/lib/opendnssec paths

Forwarded: not-needed
---
 contrib/ods-sequencer/ods-sequencer           |  2 +-
 contrib/ods-sequencer/ods-sequencer-submit.sh |  2 +-
 contrib/ods-sequencer/ods-sequencer.md        | 12 ++++++------
 enforcer/man/ods-enforcer.8.in                |  4 ++--
 enforcer/src/keystate/zone_add_cmd.c          |  6 +++---
 enforcer/utils/1.4-2.0_db_convert/README.md   |  6 +++---
 6 files changed, 16 insertions(+), 16 deletions(-)

diff --git a/contrib/ods-sequencer/ods-sequencer b/contrib/ods-sequencer/ods-sequencer
index de7a32a..a698271 100755
--- a/contrib/ods-sequencer/ods-sequencer
+++ b/contrib/ods-sequencer/ods-sequencer
@@ -6,7 +6,7 @@
 
 my $INSTALL_ROOT = "/";
 my $SYSTEM_LOG = "/var/log/messages";
-my $LOG_FILE = "/var/opendnssec/ods-sequencer.log";
+my $LOG_FILE = "/var/lib/opendnssec/ods-sequencer.log";
 my $ZONE_NAME = "example.com";
 my $verbose = 0;
 
diff --git a/contrib/ods-sequencer/ods-sequencer-submit.sh b/contrib/ods-sequencer/ods-sequencer-submit.sh
index 8a69d96..1c2afc4 100755
--- a/contrib/ods-sequencer/ods-sequencer-submit.sh
+++ b/contrib/ods-sequencer/ods-sequencer-submit.sh
@@ -1,6 +1,6 @@
 #!/bin/bash
 
 now=`../../../sbin/ods-enforcer queue 2>&1 | sed -e 's/^It is now.*(\([0-9][0-9]*\)[^)]*).*$/\1/p' -e 'd'`
-cat > ../../../var/opendnssec/sequences/$now-dssubmit
+cat > ../../../var/lib/opendnssec/sequences/$now-dssubmit
 
 exit 0
diff --git a/contrib/ods-sequencer/ods-sequencer.md b/contrib/ods-sequencer/ods-sequencer.md
index d661ced..0660f85 100644
--- a/contrib/ods-sequencer/ods-sequencer.md
+++ b/contrib/ods-sequencer/ods-sequencer.md
@@ -162,7 +162,7 @@ of the recording and play-back of signing scenarios.
 Install it on both bunker and operational environments in a suitable
 location such as "/usr/sbin".
 
-On both sides create directory "/var/opendnssec/sequences", this directory
+On both sides create directory "/var/lib/opendnssec/sequences", this directory
 will contain the future scenarios.  This directory should be writable
 by the user that will control OpenDNSSEC.
 You should not place any files of your own here, the filenames in this
@@ -285,10 +285,10 @@ not be started, you can use a call to "ods-signer start" in stead of
 
 At this time the bunker environment is ready to use.  The operational
 environment also needs to get information on the zones present.
-Transfer the file /var/opendnssec/enforcer/zones.xml from the bunker
+Transfer the file /var/lib/opendnssec/enforcer/zones.xml from the bunker
 environment to the operational environment.  The normal unsigned
 zone file (in case of file based zone files) would normally go into
-/var/opendnssec/unsigned/example.com, but this is part of the normal
+/var/lib/opendnssec/unsigned/example.com, but this is part of the normal
 set-up of OpenDNSSEC.
 This concludes the set-up of both environments.  
 
@@ -306,19 +306,19 @@ program to generate scripts upto the specified time.  For example:
 
 Will generate (a lot) of signing scenarios upto the beginning of
 year 2020.  These signing configurations (signconf's) are placed in
-/var/opendnssec/sequences.
+/var/lib/opendnssec/sequences.
 When running this command for the first time, it will use the current
 time as starting point.  When having created previous snapshots, it will
 take off from the last generated signing configuration.
 You will notice the signing configurations generated in
-    /var/opendnssec/sequences
+    /var/lib/opendnssec/sequences
 are prefixed with a unix timestamp.  If you delete a series of signing
 configurations at the end of this time-line, you can force the signer
 to re-create a set of signing instructions.  This can be useful in
 case of an emergency roll over, where you need to intervene and abort
 a current scenario.
 
-Transfer the /var/opendnssec/sequences directory from the bunker
+Transfer the /var/lib/opendnssec/sequences directory from the bunker
 environment to the operational environment and place it in the same
 location.  Also replicate the ZSK PKCS#11 key repository from the bunker
 environment to the operational environment.  It suffices to only replicate
diff --git a/enforcer/man/ods-enforcer.8.in b/enforcer/man/ods-enforcer.8.in
index be0618a..ec0d14f 100644
--- a/enforcer/man/ods-enforcer.8.in
+++ b/enforcer/man/ods-enforcer.8.in
@@ -208,10 +208,10 @@ The list of zones as defined in conf.xml. This list is used during 'zonelist imp
 .B /etc/opendnssec/kasp.xml
 The configuration of policies that define timing and security, as defined in conf.xml.
 .TP
-.B /var/opendnssec/unsigned/
+.B /var/lib/opendnssec/unsigned/
 The location that is usually configured in conf.xml which contains unsigned zones.
 .TP
-.B /var/opendnssec/signed/
+.B /var/lib/opendnssec/signed/
 The location that is usually configured in conf.xml which contains signed zones.
 .P
 .SH "DIAGNOSTICS"
diff --git a/enforcer/src/keystate/zone_add_cmd.c b/enforcer/src/keystate/zone_add_cmd.c
index a7ec9d2..da62a26 100644
--- a/enforcer/src/keystate/zone_add_cmd.c
+++ b/enforcer/src/keystate/zone_add_cmd.c
@@ -75,11 +75,11 @@ help(int sockfd)
 	"\nOptions:\n"
         "zone		name of the zone\n"
         "policy		name of the policy, if not set the default policy is used\n"
-        "signerconf	specify a location for signer configuration file, default is /var/opendnssec/signconf/\n"
+        "signerconf	specify a location for signer configuration file, default is /var/lib/opendnssec/signconf/\n"
         "in-type		specify the type of input, should be DNS or File, default is File \n"
-        "input		specify a location for the unsigned zone, this location is set in conf.xml, default for File Adapter is /var/opendnssec/unsigned/ and for DNS Adapter is /etc/opendnssec/addns.xml \n"
+        "input		specify a location for the unsigned zone, this location is set in conf.xml, default for File Adapter is /var/lib/opendnssec/unsigned/ and for DNS Adapter is /etc/opendnssec/addns.xml \n"
         "out-type	specify the type of output, should be DNS or File, default is File\n"
-        "output		specify a location for the signed zone, this location is set in conf.xml, default path for File Adapter is /var/opendnssec/signed/ and for DNS Adapter is /etc/opendnssec/addns.xml \n"
+        "output		specify a location for the signed zone, this location is set in conf.xml, default path for File Adapter is /var/lib/opendnssec/signed/ and for DNS Adapter is /etc/opendnssec/addns.xml \n"
         "xml		update the zonelist.xml file\n\n"
     );
 }
diff --git a/enforcer/utils/1.4-2.0_db_convert/README.md b/enforcer/utils/1.4-2.0_db_convert/README.md
index 89f3e38..ba95bea 100644
--- a/enforcer/utils/1.4-2.0_db_convert/README.md
+++ b/enforcer/utils/1.4-2.0_db_convert/README.md
@@ -16,7 +16,7 @@ General preparation
 -------------------
 
  * First stop OpenDNSSEC entirely.
- * You are strongly advised to backup /etc/opendnssec and /var/opendnssec before
+ * You are strongly advised to backup /etc/opendnssec and /var/lib/opendnssec before
    continuing.
  * Also prevent any nameserver from receiving updates from OpenDNSSEC until
    you are sure the migration was successful.
@@ -35,7 +35,7 @@ There are 2 relevant files for the conversion:
  * sqlite_convert.sql - Contains SQL statements, called by convert_sqlite
 
 call the script like so: `./convert_sqlite -i INPUT -o OUTPUT`. Where INPUT is
-the kasp.db file commonly found in _/var/opendnssec/kasp.db_. And OUTPUT is a
+the kasp.db file commonly found in _/var/lib/opendnssec/kasp.db_. And OUTPUT is a
 non-existing file where the new database should go. On success, replace old
 database file with the new database file or adjust _conf.xml_ accordingly.
 
@@ -62,7 +62,7 @@ stores them in the database. Make sure that at this point _conf.xml_ points to
 the new database. Then run `ods-migrate`.
 
 Now your new database is ready for use. At this point the signer will refuse to
-run because the file `/var/opendnssec/enforcer/zones.xml` does not exist
+run because the file `/var/lib/opendnssec/enforcer/zones.xml` does not exist
 yet.  In ODS 1.4 `/etc/opendnssec/zonelist.xml` is always on par with the
 database contents (this is no longer true for 2.0) so it is safe to copy this
 file over to the missing file.
